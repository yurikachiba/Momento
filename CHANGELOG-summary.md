# Momento Lite クラウド版以降の作業まとめ

クラウド版（Momento Lite クラウド版 - RENDER × Cloudinary × PWA構成）導入後、約34コミットで以下の作業が行われています。

---

## 1. 認証・ユーザー管理
- ランディングページ・ログインUIの実装
- ユーザー名/パスワード認証システム
- セッショントークン管理（30日有効期限）
- DBスキーマのマイグレーション

## 2. WebAuthn（生体認証）
- WebAuthnクレデンシャル登録・ログイン
- ブラウザのOriginヘッダーから動的にRP IDを取得
- Origin取得不可時のホスト名フォールバック
- 指紋・顔認証に対応

## 3. バックエンド安定化
- ESモジュールのimportホイスティングによる405エラー修正
- CSPセキュリティヘッダー、アイコン404、SPAルーティング修正
- HTMLエラーレスポンスのJSONパースエラー対応
- Vercelサーバーレス関数の非推奨化対応
- Renderバックエンド + 永続SQLiteへの移行

## 4. 写真管理機能
- 個別・一括写真削除機能
- 一括削除エンドポイント（/api/photos/bulk-delete）
- アップロードバグ修正（FileList空状態）
- 写真メタデータ更新（名前、メモ）

## 5. UI/UXの改善
- ナイトモードのテキスト視認性向上
- モバイルでの閉じるボタン表示改善
- モバイルレイアウト調整

---

## 作業の流れ

1. クラウド移行 → Render + Cloudinary + PWA構成への全面書き換え
2. 安定化 → バックエンドのバグ修正、Vercel→Render移行
3. 認証強化 → WebAuthn対応、登録・ログインの不具合修正
4. 機能追加 → 写真削除（個別・一括）、RP ID修正
5. 仕上げ → ナイトモード、モバイル表示の調整
